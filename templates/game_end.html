{% include "base.html" %}

<h1>TIC TAC TOE</h1>

{% if res == 'd' %}
    <h2> IT'S A DRAW! </h2>
{% elif res == 'x' %}
    <h2> X WON! </h2>
    {% if session['user_id'] == player_x %}
        <h2> YOU WON! </h2>
    {% else %}
    <h2> YOU LOST! </h2>
    {% endif %}
{% elif res == 'o' %}
    <h2> O WON! </h2>
    {% if session['user_id'] == player_o %}
        <h2> YOU WON! </h2>
    {% else %}
    <h2> YOU LOST! </h2>
    {% endif %}
{% endif %}



<h3>Game {{game_id}}</h3>



{% if session['user_id'] == next_player %}
    <h3>YOUR TURN!</h3>
{% endif %}

{% if session['user_id'] == player_x %}
    <h3>You are Player X</h3>
    <h3>Player X: {{player_x}}</h3>
{% else %}
    <h3>You are Player O</h3>
    <h3>Player O: {{player_o}}</h3>
{% endif %}

<a href="{{url_for('home')}}" class="button">Start New Game</a>


<div class="board">
{% for i in range(1,10) %}
    {% if i in x_positions %}
        {% set sign = "X" %}
        {% set class = "cell-x" %}
    {% elif i in o_positions %}
        {% set sign = "O" %}
        {% set class = "cell-o" %}
    {% else %}
        {% set sign = i %}
        {% set class = "cell-input" %}
    {% endif %}

    {% if i == last_pos %}
        {% set class = "last-move" %}
    {% endif %}

    <div data-cell-index={{i}} class="cell">
        <div class={{class}}>
            {{sign}}
        </div>
    </div>
{% endfor %}
</div>
